<!doctype html>
    <html lang="en" ng-app="unicornApp" ng-controller="UnicornController">
    <head>
        <script src="/static/js/jquery-2.1.1.min.js"></script>
        <script src="/static/js/angular.min.js"></script>
        <script src="/static/js/controllers.js"></script>

        <link rel="stylesheet" href="/static/css/bootstrap.min.css">
        <meta charset="utf-8">
        <style>
            div.qs {
                margin-top:20px;
            }
            div.hnav {
                margin-top:20px;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="row hnav">
                <ul class="list-inline">
                    <li>
                        <button type="button" class="btn btn-default" ng-click="showLog()">log</button>
                    </li>
                    <li>
                        <button type="button" class="btn btn-default" ng-click="showRollup()">Query Rollups</button>
                    </li>
                </ul>
            </div>
            <h3>DBIx::Class Log</h3>
            <div class="row">
                <form class="form-horizontal" role="form">
                    <div class='form-group'>
                        <label for="dbicu_orderprop" class="col-sm-2 control-label">Sort by</label>
                        <div class="col-sm-2">
                            <select ng-model="orderProp" class="form-control" id="dbicu_orderprop">
                                <option value="entry_id">time occured ASC</option>
                                <option value="-entry_id">time occured DESC</option>
                                <option value="runtime">runtime ASC</option>
                                <option value="-runtime">runtime DESC</option>
                            </select>
                        </div>
                        <label for="dbicu_query" class="col-sm-1 control-label">Search</label>
                        <div class="col-sm-2">
                            <input ng-model="query" class="form-control" id="dbicu_query">
                        </div>
                    </div>
                </form>
            </div>

        <div class="qs">
            <table class="table  table-striped table-bordered table-hover">
                <tr ng-repeat="q in qs | filter: { query : query } | orderBy:orderProp">
                    <td>{{q.runtime}} ms</td>
                    <td><span class="highlite">{{q.query}}</span>
                        <div><small>{{ q.params }}</small></div>
                        <div>
                            <a ng-click="hide_stack_trace = true" ng-hide="hide_stack_trace">- stack trace</a>
                            <a ng-click="q.show_stack_trace(); hide_stack_trace = false" ng-hide="!hide_stack_trace">+ stack trace</a>
                        </div>
                        <table class="table table-striped table-condensed" ng-hide="hide_stack_trace">
                            <div class="stack_trace">
                                <tr ng-repeat="stack in q.stack_trace">
                                    <td>{{stack.frame}}</td>
                                </tr>
                            </div>
                        </table>
                    </td>
                </tr>
            </table>

                <div class="row">
                    <div class="col-md-4">
                    </div>
                </div>
                <div class="row">
                </div>
            </div>
        </div>
    </div>
    <!--
    add filter for minimum filtering out minimium ms
    -->
    </body>
</html>
